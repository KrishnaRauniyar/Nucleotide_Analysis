# Common Key Calculation

**Common Key Calculation** is a Python tool for analyzing common keys between all the triplets.

## Table of Contents
- [Installation](#installation)
- [Usage](#usage)
  - [Analyzing Common Keys](#analyzing-common-keys)

## Installation

### Cloning the Repository

To get started with the `Common Key Calculation`, clone the repository from GitHub:

```bash
git clone https://github.com/KrishnaRauniyar/Nucleotide_Analysis.git
cd common_keys_analysis
```

### Installing the Package
1. It's recommended to create a virtual environment:

```bash
python -m venv tsrenv
source tsrenv/bin/activate  # Mac/Linux
tsrenv\Scripts\activate  # Windows
```

2. Install the necessary dependencies:

```bash
pip install -r requirements.txt
```

## Usage
### Analyzing Common Keys
For common key calculation run the following command:

```python
python common_keys.py --path input_dir
```
For common key individual chain calculation run the following command:

```python
python common_keys_chain.py --path input_dir
```

For common key individual chain percentage calculation run the following command:

```python
python common_keys_percent.py --path input_dir
```

For common key individual chain one vs all percentage calculation run the following command:

```python
python common_keys_percent_one_vs_all.py --path input_dir
```

The input_dir is a directory which holds the input triplet files. The common keys will be calculated between all the triplet files generated by the key_triplets TSR package. You can give the direct path to the key_triplet files directory in the TSR package.

### CSV file information as output (common_keys.csv and common_keys_chain.csv)
Files common_keys.csv and common_keys_chain.csv (chain - individual chain names) will be genrated in a following format.

| fileName      | total_keys | common_keys | sum_common_keys_freq   | 
|---------------|------------|-------------|------------------------|
| 1_1TSR_E_DT   | 4          | 0           | 0                      |
| 1_2AC0_E_DC   | 1          | 0           | 0                      |

File name are all the triplets files in the input_dir. We have total_keys, common_keys and sum_common_keys_freq which contains total number of keys in each triplet files, common keys in all the triplet files and sum of all the triplet keys which are common respectively. Common keys chain will produce individual chain common keys with their respective chain name.

### CSV file information as output (common_keys_percent_chain.csv)
Files common_keys_percent_chain.csv (chain - individual chain names) will be genrated in a following format.

| key           | key_occurance | total_files | key_percent   | 
|---------------|---------------|-------------|---------------|
| 45680161      | 1291          | 1492        | 86.52         |
| 46126751      | 820           | 1942        | 54.95         |

File name are all the triplets files in the input_dir. We have key, key_occurance, total_files and key_percent which contains the key number, the key occurrence in indiviudal chains, total files in the directory and the percentage calculation for each key.

### CSV file information as output (common_keys_percent_one_vs_all.csv)
A csv file common_keys_percent_one_vs_all.csv (chain - one chain names vs other chain names) will be genrated in a following format.

| key           | chain1%       | chain2%     | chain3%       | 
|---------------|---------------|-------------|---------------|
| 45680161      | 86.52         | 87.88       | 86.52         |
| 46126751      | 82.55         | 19.42       | 0             |

File name are all the triplets files in the input_dir. We have key, chain1%, chain2%, chain3% which contains the percentage of key occurrence in chain1, chain2 and chain3 respectively.

